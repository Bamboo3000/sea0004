{{ form_open({ enctype: 'multipart/form-data', method: 'POST', files: 'true', class: 'application-form', request: 'onFormSubmit',  }) }}
    <i class="material-icons close" onclick="hideForm()">close</i>
    {% flash success %}
        {% if message == 'app' %}
            <p
                data-control="flash-message"
                class="flash-message fade info"
                data-interval="10">
                {{ 'Application submitted!'|_ }}
            </p>
        {% endif %}
    {% endflash %}
    <div class="title">
        <p>{{ 'Applying for'|_ }}: <span>{{ record.title|raw }}</span></p>
        <span>
            {{ 'Fill the form using'|_ }}:
        </span>
        <button class="fb" type="button" onclick="myFacebookLogin()">Facebook</button>
        <button class="li" type="button" onclick="liAuth()">Linkedin</button>
    </div>
    <div class="input-cont">
        {{ form_token() }}
        {{ form_sessionKey() }}
        <input type="hidden" name="job-id" class="job-id" value="{{ record.job_id|length ? record.job_id : 188 }}">
        <input type="hidden" name="applicant-gender">
        <input type="hidden" name="form_type" value="application">
        <label for="applicant-name">{{ 'Name'|_ }} <span>*</span></label>
        <input type="text" name="applicant-name" value="" required="required" placeholder="{{ 'John Doe'|_ }}">
        <label for="applicant-email">{{ 'Email'|_ }} <span>*</span></label>
        <input type="email" name="applicant-email" value="" required="required" placeholder="{{ 'johndoe@example.com'|_ }}">
        <label for="applicant-phone">{{ 'Phone'|_ }}</label>
        <input type="tel" name="applicant-phone" value="" placeholder="{{ '+31 123 456 789'|_ }}">
        <label for="applicant-address">{{ 'Address'|_ }}</label>
        <textarea class="address" name="applicant-address" placeholder="{{ 'Prinses Beatrixlaan 23 &#x0a;2595 AK  'S-Gravenhage &#x0a;Netherlands'|_ }}"></textarea>
        <label for="applicant-cv">{{ 'Upload your CV'|_ }} <span>*</span></label>
        <div class="cvupload">
            <p id="applicant-cv"><i>{{ 'Accepted formats: .doc | .docx | .pdf'|_ }}</i></p>
            <input type="file" accept="application/pdf,application/msword,
            application/vnd.openxmlformats-officedocument.wordprocessingml.document"  name="applicant-cv" value="" required="required" onchange="getFileName(this, 'applicant-cv')">
        </div>
        <div class="hidden-desktop">
            <label for="applicant-photo">{{ 'Upload your photo'|_ }}</label>
            <div class="cvupload">
                <p id="applicant-photo-mobile"><i>{{ 'Accepted formats: .jpg | .png | .gif'|_ }}</i></p>
                <input type="file" accept="image/*" name="applicant-photo" value="" onchange="getFileName(this, 'applicant-photo-mobile')">
            </div>
        </div>
    </div>
    <div class="input-cont">
        <div>
            <label for="applicant-find">{{ 'How did you find us?'|_ }}</label>
            <select name="applicant-find">
                <option value="Website SIR" selected disabled>{{ 'Choose an option'|_ }}</option>
                <option value="Website SIR">Website (direct)</option>
                <option value="Bing">Bing</option>
                <option value="Clients">Clients</option>
                <option value="Facebook">Facebook</option>
                <option value="Freelance.nl">Freelance.nl</option>
                <option value="Github">Github</option>
                <option value="Glassdoor">Glassdoor</option>
                <option value="Google">Google</option>
                <option value="Indeed">Indeed</option>
                <option value="Instagram">Instagram</option>
                <option value="Jobbird">Jobbird</option>
                <option value="LinkedIn">LinkedIn</option>
                <option value="Monsterboard">Monsterboard</option>
                <option value="Network">Network</option>
                <option value="Stackoverflow">Stackoverflow</option>
                <option value="Twitter">Twitter</option>
            </select>
            <i class="material-icons">expand_more</i>
        </div>
        <label for="applicant-message">{{ 'Motivation and extra details'|_ }}</label>
        <textarea class="message" name="applicant-message" placeholder="{{ 'Webtwo ipsum mobly doostang cotweet handango, mozy. Jajah shopify meebo spotify balihoo dopplr klout, vimeo dopplr tumblr chumby yoono. Mozy napster tivo kazaa, kaboodle heekya. Etsy zillow movity jajah imvu, zanga dogster. Rovio bitly insala blyve, wikia.'|_ }}"></textarea>
        <div class="hidden-mobile">
            <label for="applicant-photo">{{ 'Upload your photo'|_ }}</label>
            <div class="cvupload">
                <p id="applicant-photo-desktop"><i>{{ 'Accepted formats: .jpg | .png | .gif'|_ }}</i></p>
                <input type="file" accept="image/*" name="applicant-photo" value="" onchange="getFileName(this, 'applicant-photo-desktop')">
            </div>
        </div>
    </div>
    <input type="submit" value="{{ 'Send the application'|_ }}">
{{ form_close() }}
{# 
<script type="text/javascript" src="//platform.linkedin.com/in.js">
    $(window).on('load', function() {
        api_key: 77dug7ogaz4ouh
        onLoad: OnLinkedInFrameworkLoad
        authorize: false
    });
</script>

<script>
    window.fbAsyncInit = function() {
        FB.init({
          appId      : '382574281913074',
          xfbml      : true,
          version    : 'v2.5'
        });
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));

      function myFacebookLogin() {
        FB.init({
            appId      : '382574281913074',
            xfbml      : true,
            version    : 'v2.5'
        });
        FB.login(function(response){
          if (response.status === 'connected') {
            console.log('Logged in.');
            FB.api('/me', {fields: 'name, email, location, gender'}, function(response1){
                // console.log(response1['name']);
                $('.apply-form').find('input.name').val(response1['name']);
                $('.apply-form').find('input.email').val(response1['email']);
                $('.apply-form').find('input.address').val(response1['location']);
                $('.apply-form').find('input.gender').val(response1['gender']);
            });
            FB.api('/me/picture',{"redirect": false, "height": 200, "width": 200, "type": "normal"}, function(response2){
                // console.log(response2['data']['url']);
                $('.apply-form').find('input.photo-url').val(response2['data']['url']);
                if((response2['data']['url']).length){
                    $('.apply-form').find('#labelP').css('background-image', 'url('+response2['data']['url']+')');
                    $('.photoLabel').text('');
                    $('.apply-form').find('.photo-file').val('');
                }
            });
          }
          else {
            FB.login();
          }
        }, {scope: 'publish_actions'} );
    }

    function liAuth(){
       IN.User.authorize(function(){
           onLinkedInLoad();
       });
    }

    function OnLinkedInFrameworkLoad() {
      IN.Event.on(IN, "auth", onLinkedInLoad);
    }
    // Setup an event listener to make an API call once auth is complete
    function onLinkedInLoad() {
        IN.API.Profile("me").result(getProfileData);
    }

    // Handle the successful return from the API call
    function onSuccess(data) {
        console.log(data);
        $('.apply-form').find('input.name').val(data['firstName']+' '+data['lastName']);
        $('.apply-form').find('input.email').val(data['emailAddress']);
        $('.apply-form').find('input.address').val(data['location']['name']);
        $('.apply-form').find('input.photo-url').val(data['pictureUrl']);
        if((data['pictureUrl']).length){
            $('.apply-form').find('#labelP').css('background-image', 'url('+data['pictureUrl']+')');
            $('.photoLabel').text('');
            $('.apply-form').find('.photo-file').val('');
        }
    }

    // Handle an error response from the API call
    function onError(error) {
        console.log(error);
    }

    // Use the API call wrapper to request the member's basic profile data
    function getProfileData() {
        IN.API.Raw("/people/~:(first-name,last-name,picture-url,email-address,location)").result(onSuccess);
    }

</script> #}